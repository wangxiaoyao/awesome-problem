<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>get数据</h1>
    <div>
      <span>（简单点击）获取数据：有data的get和无data的get</span>
      <button onclick="getSimpleData(event)">点击获取:有data</button>
      <button onclick="getSimpleNoData(event)">点击获取:无data</button>
    </div>
    <div>
      <p>展示</p>
      <img src="" alt="getPic" id="getPic" />
      <button onclick="getPicData(event)">点击获取图片</button>
    </div>

    <script src="./myAjax.js"></script>
    <script>
      function getSimpleData() {
        let requestData = {
          method: "get",
          url: "http://127.0.0.1:7777/get",
          data: {
            key: 1,
            name: "xiaoyao",
          },
        };
        myAjax(requestData).then((data) => {
          console.log(data);
        });
      }
      function getSimpleNoData() {
        let requestData = {
          method: "get",
          url: "http://127.0.0.1:7777/get",
        };
        myAjax(requestData).then((data) => {
          console.log(data);
        });
      }
      function getPicData() {
        let requestData = {
          method: "get",
          url: "http://127.0.0.1:7777/get",
          data: {
            key: 2,
          },
        };
        myAjax(requestData).then((data) => {
          let img = document.getElementById("getPic");
          binaryData = "data:image/jpeg;base64," + JSON.parse(data).data;
          img.setAttribute("src", binaryData);
        });
      }
    </script>
  </body>
</html>
